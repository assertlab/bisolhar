import{r as x,j as t}from"./vendor-CJmpltsM.js";import{e as M}from"./charts-vendor-SiyFcdSU.js";import{u as N,T as k}from"./index-CICizrae.js";import{u as D}from"./useChartTheme-BDedAtl8.js";import"./pdf-vendor-x8lqkAI1.js";function S({data:e,createdAt:d}){const{t:a}=N(),{textColor:h,gridColor:g}=D(),i=x.useMemo(()=>{let r=52;if(d)try{const s=new Date(d),m=new Date;if(!isNaN(s.getTime())){const o=m-s;r=Math.ceil(o/(1e3*60*60*24*7))}}catch{r=52}return r},[d]),p=x.useMemo(()=>{let r=e;if(e&&e.datasets&&e.datasets[0]&&e.datasets[0].data){const s=e.datasets[0].data,m=Math.min(i+4,52);let o=Math.min(s.length,m);const v=s.findIndex(n=>n>0);let l=0;v!==-1?(l=Math.max(0,v-2),o=Math.min(s.length-l,o)):i<52&&(l=Math.max(0,s.length-o));const u=s.slice(l,l+o),f=[];for(let n=u.length-1;n>=0;n--){const c=new Date;c.setDate(c.getDate()-n*7);const b=`${String(c.getDate()).padStart(2,"0")}/${String(c.getMonth()+1).padStart(2,"0")}`;f.push(b)}r={labels:f,datasets:[{...e.datasets[0],data:u}]}}return r},[e,i]),w=p?.datasets?.[0]?.data!==void 0,j=p,y=x.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,grid:{borderDash:[2,4],color:g},ticks:{color:h}},x:{grid:{display:!1},ticks:{color:h}}}}),[g,h]);return w?t.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-sm p-6 flex flex-col h-80 hover:shadow-md transition-shadow relative overflow-visible hover:z-50",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a("charts.commitActivity.title",{weeks:i}),t.jsx(k,{text:a("charts.commitActivity.tooltip"),children:t.jsx("svg",{className:"w-4 h-4 text-gray-300 dark:text-slate-500 hover:text-gray-500 dark:hover:text-slate-400 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),t.jsx("div",{className:"flex-grow relative",style:{height:"100%",minHeight:"200px"},children:t.jsx(M,{data:j,options:y})})]}):t.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-sm p-6 flex flex-col h-80 hover:shadow-md transition-shadow relative overflow-visible hover:z-50",children:[t.jsxs("h3",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[a("charts.commitActivity.title",{weeks:i}),t.jsx(k,{text:a("charts.commitActivity.tooltip"),children:t.jsx("svg",{className:"w-4 h-4 text-gray-300 dark:text-slate-500 hover:text-gray-500 dark:hover:text-slate-400 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),t.jsx("div",{className:"flex-grow flex items-center justify-center",children:t.jsxs("div",{className:"text-center text-gray-500 dark:text-slate-400",children:[t.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),t.jsx("p",{className:"text-sm",children:a("charts.commitActivity.noData.title")}),t.jsx("p",{className:"text-xs text-gray-400 dark:text-slate-500 mt-1",children:a("charts.commitActivity.noData.subtitle")})]})})]})}export{S as default};
