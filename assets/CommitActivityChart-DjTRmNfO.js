import{j as e}from"./vendor-CJmpltsM.js";import{e as j}from"./charts-vendor-SiyFcdSU.js";import{u as y,T as v}from"./index-1pQ-Uxez.js";import{u as b}from"./useChartTheme-BDedAtl8.js";import"./pdf-vendor-x8lqkAI1.js";function z({data:a,createdAt:n}){const{t:o}=y(),{textColor:g,gridColor:f}=b();console.log("CommitActivityChart renderizado"),console.log("Data recebida:",a),console.log("createdAt recebida:",n);let s=52;if(n)try{const t=new Date(n),h=new Date;if(!isNaN(t.getTime())){const r=h-t;s=Math.ceil(r/(1e3*60*60*24*7)),console.log("Idade exata em semanas:",s,"createdAt:",n)}}catch(t){console.warn("Error calculating project age:",t),s=52}let d=a;if(a&&a.datasets&&a.datasets[0]&&a.datasets[0].data){const t=a.datasets[0].data,h=Math.min(s+4,52);let r=Math.min(t.length,h);const m=t.findIndex(l=>l>0);let i=0;m!==-1?(i=Math.max(0,m-2),r=Math.min(t.length-i,r)):s<52&&(i=Math.max(0,t.length-r));const x=t.slice(i,i+r),p=[];for(let l=x.length-1;l>=0;l--){const c=new Date;c.setDate(c.getDate()-l*7);const w=`${String(c.getDate()).padStart(2,"0")}/${String(c.getMonth()+1).padStart(2,"0")}`;p.push(w)}d={labels:p,datasets:[{...a.datasets[0],data:x}]},console.log("Smart trim aplicado:",{projectAgeWeeks:s,originalLength:t.length,firstActivityIndex:m,startIndex:i,itemsToShow:r,trimmedLength:x.length})}else console.warn("Dados do gráfico não estão no formato esperado:",a);if(!(d?.datasets?.[0]?.data!==void 0))return e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-sm p-6 flex flex-col h-80 hover:shadow-md transition-shadow relative overflow-visible hover:z-50",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[o("charts.commitActivity.title",{weeks:s}),e.jsx(v,{text:o("charts.commitActivity.tooltip"),children:e.jsx("svg",{className:"w-4 h-4 text-gray-300 dark:text-slate-500 hover:text-gray-500 dark:hover:text-slate-400 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("div",{className:"flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-slate-400",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("p",{className:"text-sm",children:o("charts.commitActivity.noData.title")}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-slate-500 mt-1",children:o("charts.commitActivity.noData.subtitle")})]})})]});const u=d,k={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,grid:{borderDash:[2,4],color:f},ticks:{color:g}},x:{grid:{display:!1},ticks:{color:g}}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-lg shadow-sm p-6 flex flex-col h-80 hover:shadow-md transition-shadow relative overflow-visible hover:z-50",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 dark:text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[o("charts.commitActivity.title",{weeks:s}),e.jsx(v,{text:o("charts.commitActivity.tooltip"),children:e.jsx("svg",{className:"w-4 h-4 text-gray-300 dark:text-slate-500 hover:text-gray-500 dark:hover:text-slate-400 cursor-help",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("div",{className:"flex-grow relative",style:{height:"100%",minHeight:"200px"},children:e.jsx(j,{data:u,options:k})})]})}export{z as default};
